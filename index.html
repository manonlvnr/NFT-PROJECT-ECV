<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>NFT APP</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/tw-elements/dist/css/index.min.css"
    />
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            fontFamily: {
              sans: ["Inter", "sans-serif"],
            },
          },
        },
      };
    </script>
  </head>

  <body></body>
  <script src="https://cdn.jsdelivr.net/npm/tw-elements/dist/js/index.min.js"></script>
  <script type="text/javascript">
    const root = document.querySelector("body");

    function createElement(tag, config, parent = null) {
      // const { text, color } = config || {};
      const { nameNFT, src, ownerNFT, creatorNFT, descriptionNFT} = config || {};

      const element = document.createElement(tag);

      // if (color) {
      //     element.style.color = color;
      // }

      // if (text) {
      //     element.innerHTML = text;
      let bodyElement = document.body;
        // Créer un élément img avec l'url de l'image et le mettre dans la variable myDiv
        let cardElement = document.createElement("div");
        let imageContainer = document.createElement("div");
        let imageElement = document.createElement("img");
        let infoContainer = document.createElement("div");
        let name = document.createElement("h5");
        let description = document.createElement("p");
        let creator = document.createElement("p");
        let owner = document.createElement("p");
        let buyBtn = document.createElement("button");
        let likeBtn = document.createElement("button");

        cardElement.className = "flex font-sans my-8 mx-8";
        imageContainer.className = "flex-none w-56 relative shadow-md";
        imageElement.className =
          "absolute inset-0 w-full h-full object-cover rounded-lg ";
        infoContainer.className = "flex-auto p-6 shadow-md";
        name.className =
          "w-full flex-none mt-2 order-1 text-3xl font-bold text-violet-600";
        description.className = "text-sm text-slate-500 ";
        creator.className = "flex-auto font-medium text-slate-900";
        owner.className = "text-sm font-medium text-slate-400";
        buyBtn.className =
          "h-10 px-6 font-semibold rounded-full bg-violet-600 text-white";
        likeBtn.className =
          "flex-none flex items-center justify-center w-9 h-9 rounded-full text-violet-600 bg-violet-50";

        imageElement.src = src;

        name.innerText = nameNFT;
        description.innerText = descriptionNFT;
        creator.innerText = creatorNFT;
        owner.innerText = ownerNFT;
        buyBtn.innerText = "Buy it";

        bodyElement.appendChild(cardElement);
        cardElement.append(imageContainer, infoContainer);

        imageContainer.appendChild(imageElement);
        infoContainer.append(
          name,
          description,
          creator,
          owner,
          buyBtn,
          likeBtn
        );
      if (!parent) {
        root.appendChild(element);
      } else {
        parent.appendChild(element);
      }
      return element;
    }

    const nftContainer = createElement("div");
    const data = ["Hello", "world", "toto", "tata"];

    // Créateur
    // Nombre de ventes
    // Détails des produits NFT
    // Liste des produits NFT

    function createCards(assets) {
      assets.forEach((el) => {
        /*let bodyElement = document.body;
        // Créer un élément img avec l'url de l'image et le mettre dans la variable myDiv
        let cardElement = document.createElement("div");
        let imageContainer = document.createElement("div");
        let imageElement = document.createElement("img");
        let infoContainer = document.createElement("div");
        let name = document.createElement("h5");
        let description = document.createElement("p");
        let creator = document.createElement("p");
        let owner = document.createElement("p");
        let buyBtn = document.createElement("button");
        let likeBtn = document.createElement("button");

        cardElement.className = "flex font-sans my-8 mx-8";
        imageContainer.className = "flex-none w-56 relative shadow-md";
        imageElement.className =
          "absolute inset-0 w-full h-full object-cover rounded-lg ";
        infoContainer.className = "flex-auto p-6 shadow-md";
        name.className =
          "w-full flex-none mt-2 order-1 text-3xl font-bold text-violet-600";
        description.className = "text-sm text-slate-500 ";
        creator.className = "flex-auto font-medium text-slate-900";
        owner.className = "text-sm font-medium text-slate-400";
        buyBtn.className =
          "h-10 px-6 font-semibold rounded-full bg-violet-600 text-white";
        likeBtn.className =
          "flex-none flex items-center justify-center w-9 h-9 rounded-full text-violet-600 bg-violet-50";

        imageElement.src = el.image_url;

        name.innerText = ename;
        description.innerText = el.description;
        creator.innerText = el.creator.username;
        owner.innerText = el.owner.name;
        buyBtn.innerText = "Buy it";

        bodyElement.appendChild(cardElement);
        cardElement.append(imageContainer, infoContainer);

        imageContainer.appendChild(imageElement);
        infoContainer.append(
          name,
          description,
          creator,
          owner,
          buyBtn,
          likeBtn
        );*/
        createElement("div", {
            nameNFT: el.name,
            src: el.image_url,
            ownerNFT: el.owner.name,
            creatorNFT: el.creator.username,
            descriptionNFT: el.description,
        });
        /*createElement(el, {
          src: el.image_url,
          href: el.url,
        });*/
      });
    }

    async function callApi() {
      // Call api  https://awesome-nft-app.herokuapp.com/ and get image with fetch, try
      // Create cards with data
      try {
        const response = await fetch("https://awesome-nft-app.herokuapp.com/");
        const data = await response.json();
        const assets = data.assets;

        createCards(assets);

        console.log(assets);
      } catch (error) {
        console.log(error);
      }
    }

    callApi();
  </script>
</html>
